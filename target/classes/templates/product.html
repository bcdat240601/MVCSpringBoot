<!DOCTYPE html>
<html lang="zxx">

    <head>
        <meta charset="UTF-8">
        <meta name="description" content="codelean Template">
        <meta name="keywords" content="codelean, unica, creative, html">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>CodeLean | Template</title>

        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">

        <!-- Css Styles -->
        <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
        <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
        <link rel="stylesheet" href="/css/themify-icons.css" type="text/css">
        <link rel="stylesheet" href="/css/elegant-icons.css" type="text/css">
        <link rel="stylesheet" href="/css/owl.carousel.min.css" type="text/css">
        <link rel="stylesheet" href="/css/nice-select.css" type="text/css">
        <link rel="stylesheet" href="/css/jquery-ui.min.css" type="text/css">
        <link rel="stylesheet" href="/css/slicknav.min.css" type="text/css">
        <link rel="stylesheet" href="/css/style.css" type="text/css">
    </head>

    <body>
        <!-- Start coding here -->

        <div th:replace="/header-footer :: header"></div>

        <!-- {{-- Breadcrumb Section Begin --}} -->
        <div class="breadcrumb-section">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="breadcrumb-text">
                            <a href="index.html"><i class="fa fa-home"></i>Home</a>
                            <a href="shop.html">Shop</a>
                            <span>Detail</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- {{-- Breadcrumb Section End --}} -->

        <!-- Product Shop Section Begin -->
        <section class="product-shop spad page-details">
            <div th:each="state: ${dataVegetable}" class="container">
                <div class="row">
                    <div class="col-lg-4">
                        <div class="product-pic-zoom">
                            <img class="product-big-img" src="img/product-single/product-1.jpg" alt="">
                            <div class="zoom-icon">
                                <i class="fa fa-search-plus"></i>
                            </div>
                        </div> 
                        <div>


                            <img th:src="@{'../img/products/' + ${state.Image}}" alt="">



                        </div> 
                    </div> 
                    <div class="col-lg-6">
                        <div  class="product-details">
                            <div class="pd title">

                                <h3 th:utext="${state.vegetable_name}"></h3>

                            </div>

                            <div class="pd-desc">
                                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Asperiores eius at dicta molestias beatae unde, perferendis iure deserunt, sequi minima, minus sed tempora. Quae excepturi animi sapiente ex vel omnis.</p>
                                <span th:utext="${state.Price} + ' VND'"></span>
                            </div>


                            <div class="quantity">
                                <div class="quantity">
                                    <div class="pro-qty">
                                        <input id="quan" th:type="number" th:value="1" th:min="1" th:max="${state.Amount}">
                                        <span th:utext="${state.Unit}"></span>
                                    </div>

                                    <button th:onclick="testFunction()" class="primary-btn pd-cart">Add To Cart</button>
                                </div>
                            </div>
                            <ul class="pd-tags">
                                <span>CATEGORIES</span>
                                <li th:utext="${state.CategoryObject.Name}"></li>

                            </ul>
                            <div class="pd-share">

                                <div class="pd-social">
                                    <a href="#"><i class="ti-facebook"></i></a>
                                    <a href="#"><i class="ti-twitter-alt"></i></a>
                                    <a href="#"><i class="ti-linkedin"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>









        </section>
        <!-- Product Shop Section End  -->

        <!-- Related Products Section Begin  -->


        <!-- Related Products Section End  -->

        <!-- {{-- Partner Logo Section Begin --}} -->
        <div class="partner-logo">
            <div class="container">
                <div class="logo-carousel owl-carousel">
                    <div class="logo-item">
                        <div class="tablecell-inner">
                            <img src="img/logo-carousel/logo-1.png">
                        </div>
                    </div>
                    <div class="logo-item">
                        <div class="tablecell-inner">
                            <img src="img/logo-carousel/logo-2.png">
                        </div>
                    </div>
                    <div class="logo-item">
                        <div class="tablecell-inner">
                            <img src="img/logo-carousel/logo-3.png">
                        </div>
                    </div>
                    <div class="logo-item">
                        <div class="tablecell-inner">
                            <img src="img/logo-carousel/logo-4.png">
                        </div>
                    </div>
                    <div class="logo-item">
                        <div class="tablecell-inner">
                            <img src="img/logo-carousel/logo-5.png">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- {{-- Partner Logo Section End --}} -->

        <div th:replace="/header-footer :: footer"></div>        
        <div th:replace="/header-footer :: scripts"></div>  
        <script>

            /*<![CDATA[*/
            let testFunction = () => {
                let flag = 0;
                let arrayCart = JSON.parse(sessionStorage.getItem("cart"));
                let vegetable = {
                    id: `[[${dataVegetable.VegetableID}]]`,
                    productName: `[[${dataVegetable.vegetable_name}]]`,
                    quantity: parseInt(document.querySelector("#quan").value)
                };
                if (arrayCart !== null) {
                    arrayCart.map((cart) => {
                        if (cart.id === vegetable.id) {
                            flag++;
                            console.log("Test");
                            cart.quantity += parseInt(document.querySelector("#quan").value);
                            sessionStorage.setItem("cart", JSON.stringify(arrayCart));
                        }
                    });
                    if (flag === 0) {
                        arrayCart.push(vegetable);
                        sessionStorage.setItem("cart", JSON.stringify(arrayCart));
                    }

                } else {
                    arrayCart = [];
                    arrayCart.push(vegetable);
                    sessionStorage.setItem("cart", JSON.stringify(arrayCart));
                }
            };
            /*]]>*/
        </script>
    </body>

</html>